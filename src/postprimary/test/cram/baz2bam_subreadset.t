Create BAZ files
  $ simbazwriter -o out_production.baz -f $TESTDIR/data/goldenSubset.fasta --silent > /dev/null 2>&1

  $ baz2bam out_production.baz -o out_production --hqregion -j 8 --fasta --silent -Q $TESTDIR/data/goldenSubset.fasta --subreadset=$TESTDIR/data/SubreadSet.xml --enableBarcodedAdapters=False

  $ xpath -q -e '/pbds:SubreadSet/pbds:DataSetMetadata/pbds:TotalLength/text()' out_production.subreadset.xml
  251077

  $ samtools view -H out_production.hqregions.bam
  @HD\tVN:1.5\tSO:unknown\tpb:3.0.7 (esc)
  @RG\tID:a0c9db3d\tPL:PACBIO\tDS:READTYPE=HQREGION;Ipd:Frames=ip;PulseWidth:Frames=pw;StartFrame=sf;BINDINGKIT=100-862-200;SEQUENCINGKIT=101-826-100;BASECALLERVERSION=5.0.0;FRAMERATEHZ=100.000000\tLB:(Obfuscated)\tPU:m00001_052415_013000\tPM:SEQUELII (esc)
  @PG\tID:baz2bam\tPN:baz2bam\tVN:GIT_BRANCH_RAW_65c9f876550f6dbe79fecb88e38dfe4c691ca575-dirty\tCL:baz2bam out_production.baz -o out_production --hqregion -j 8 --fasta --silent -Q /home/UNIXHOME/jnguyen/pa-kestrel/src/postprimary/test/cram/data/goldenSubset.fasta --subreadset=/home/UNIXHOME/jnguyen/pa-kestrel/src/postprimary/test/cram/data/SubreadSet.xml --enableBarcodedAdapters=False  (esc)
  @PG\tID:bazFormat\tPN:bazformat\tVN:2.0.0 (esc)
  @PG\tID:bazwriter\tPN:bazwriter\tVN:0.0.0 (esc)
  @PG\tID:samtools\tPN:samtools\tPP:baz2bam\tVN:1.10\tCL:samtools view -H out_production.hqregions.bam (esc)
  @PG\tID:samtools.1\tPN:samtools\tPP:bazFormat\tVN:1.10\tCL:samtools view -H out_production.hqregions.bam (esc)
  @PG\tID:samtools.2\tPN:samtools\tPP:bazwriter\tVN:1.10\tCL:samtools view -H out_production.hqregions.bam (esc)
  @CO\t{"collection_metadata_xml":"PENvbGxlY3Rpb25NZXRhZGF0YSBVbmlxdWVJZD0iYmQ3MmFhYmQtNTcyZC00Y2VlLWI1NTMtYTA4M2RmMDQ5M2EyIiBUaW1lU3RhbXBlZE5hbWU9IlVuc2V0LUNvbGxlY3Rpb25NZXRhZGF0YS0yMDIyLTMxLTA5VDE3OjMxOjM3LjcyN1oiIFN0YXR1cz0iUmVhZHkiIEluc3RydW1lbnRJZD0iVW5zZXQiIEluc3RydW1lbnROYW1lPSJTZXF1ZWwgSUkgSW5zdHJ1bWVudCIgQ29udGV4dD0ibTY0MDA3XzIyMDMwOV8yMzU4MDYiPgoJPENvbnNlbnN1c1JlYWRTZXRSZWYgVW5pcXVlSWQ9ImViYzE4Mzk2LTg2NGQtNDQwZS04OGRkLTE4NGVmOTU0MmU4ZiIgLz4KCTxSdW5EZXRhaWxzPgoJCTxUaW1lU3RhbXBlZE5hbWU+clVuc2V0XzIwMjIwMzA5XzE3MzEzNzwvVGltZVN0YW1wZWROYW1lPgoJCTxOYW1lPihPYmZ1c2NhdGVkKTwvTmFtZT4KCQk8Q3JlYXRlZEJ5PnVua25vd248L0NyZWF0ZWRCeT4KCQk8V2hlbkNyZWF0ZWQ+MjAyMi0wMy0wOVQxNzozMTozNC40MTY1OTExWjwvV2hlbkNyZWF0ZWQ+CgkJPFN0YXJ0ZWRCeT51bmtub3duPC9TdGFydGVkQnk+Cgk8L1J1bkRldGFpbHM+Cgk8V2VsbFNhbXBsZSBOYW1lPSIoT2JmdXNjYXRlZCkiPgoJCTxXZWxsTmFtZT5TYW1wbGVQbGF0ZS0xLUEtMTwvV2VsbE5hbWU+CgkJPFNhbXBsZVJldXNlRW5hYmxlZD50cnVlPC9TYW1wbGVSZXVzZUVuYWJsZWQ+Cgk8L1dlbGxTYW1wbGU+Cgk8QXV0b21hdGlvbiBOYW1lPSJXb3JrZmxvd19EaWZmdXNpb25fU3BpZGVyLnB5Ij4KCQk8QXV0b21hdGlvblBhcmFtZXRlcnMgeG1sbnM9Imh0dHA6Ly9wYWNpZmljYmlvc2NpZW5jZXMuY29tL1BhY0Jpb0Jhc2VEYXRhTW9kZWwueHNkIj4KCQkJPEF1dG9tYXRpb25QYXJhbWV0ZXIgTmFtZT0iTW92aWVMZW5ndGgiIFZhbHVlRGF0YVR5cGU9IkRvdWJsZSIgU2ltcGxlVmFsdWU9IjEyMCIgLz4KCQkJPEF1dG9tYXRpb25QYXJhbWV0ZXIgTmFtZT0iU0FJbmN1YmF0aW9uVGltZSIgVmFsdWVEYXRhVHlwZT0iRG91YmxlIiBTaW1wbGVWYWx1ZT0iMzAiIC8+CgkJCTxBdXRvbWF0aW9uUGFyYW1ldGVyIE5hbWU9IkltbW9iaWxpemF0aW9uVGltZSIgVmFsdWVEYXRhVHlwZT0iRG91YmxlIiBTaW1wbGVWYWx1ZT0iMzAiIC8+CgkJCTxBdXRvbWF0aW9uUGFyYW1ldGVyIE5hbWU9IlJldXNlQ2VsbCIgVmFsdWVEYXRhVHlwZT0iQm9vbGVhbiIgU2ltcGxlVmFsdWU9IlRydWUiIC8+CgkJCTxBdXRvbWF0aW9uUGFyYW1ldGVyIE5hbWU9IkFjdGl2ZUxhc2VyUG93ZXIiIFZhbHVlRGF0YVR5cGU9IlN0cmluZyIgU2ltcGxlVmFsdWU9IkZhbHNlIiAvPgoJCQk8QXV0b21hdGlvblBhcmFtZXRlciBOYW1lPSJQQ0RpblBsYXRlIiBWYWx1ZURhdGFUeXBlPSJCb29sZWFuIiBTaW1wbGVWYWx1ZT0iVHJ1ZSIgLz4KCQkJPEF1dG9tYXRpb25QYXJhbWV0ZXIgTmFtZT0iVXNlUHJlZGljdGl2ZUxvYWRpbmdCdWZmZXIiIFZhbHVlRGF0YVR5cGU9IkJvb2xlYW4iIFNpbXBsZVZhbHVlPSJUcnVlIiAvPgoJCQk8QXV0b21hdGlvblBhcmFtZXRlciBOYW1lPSJSZXVzZVNhbXBsZSIgVmFsdWVEYXRhVHlwZT0iU3RyaW5nIiBTaW1wbGVWYWx1ZT0iRmFsc2UiIC8+CgkJCTxBdXRvbWF0aW9uUGFyYW1ldGVyIE5hbWU9IklzRmlyc3RTYW1wbGUiIFZhbHVlRGF0YVR5cGU9IlN0cmluZyIgU2ltcGxlVmFsdWU9IlRydWUiIC8+CgkJCTxBdXRvbWF0aW9uUGFyYW1ldGVyIE5hbWU9IklzRmlyc3RDZWxsVXNlIiBWYWx1ZURhdGFUeXBlPSJCb29sZWFuIiBTaW1wbGVWYWx1ZT0iVHJ1ZSIgLz4KCQkJPEF1dG9tYXRpb25QYXJhbWV0ZXIgTmFtZT0iQ2VsbFVzZUNvdW50IiBWYWx1ZURhdGFUeXBlPSJJbnQxNiIgU2ltcGxlVmFsdWU9IjEiIC8+CgkJCTxBdXRvbWF0aW9uUGFyYW1ldGVyIE5hbWU9IkNvbGxlY3Rpb25OdW1iZXIiIFZhbHVlRGF0YVR5cGU9IkludDMyIiBTaW1wbGVWYWx1ZT0iMCIgLz4KCQkJPEF1dG9tYXRpb25QYXJhbWV0ZXIgTmFtZT0iQmluZGluZ0tpdFBhcnROdW1iZXIiIFZhbHVlRGF0YVR5cGU9IlN0cmluZyIgU2ltcGxlVmFsdWU9IjEwMC04NjItMjAwIiAvPgoJCQk8QXV0b21hdGlvblBhcmFtZXRlciBOYW1lPSJUaXBTZWFyY2hNYXhEdXJhdGlvbiIgVmFsdWVEYXRhVHlwZT0iSW50MzIiIFNpbXBsZVZhbHVlPSI1NzYiIC8+CgkJCTxBdXRvbWF0aW9uUGFyYW1ldGVyIE5hbWU9IlBQQUVzdGltYXRlZER1cmF0aW9uIiBWYWx1ZURhdGFUeXBlPSJEb3VibGUiIFNpbXBsZVZhbHVlPSI3MiIgLz4KCQkJPEF1dG9tYXRpb25QYXJhbWV0ZXIgTmFtZT0iUFBBTWluRHVyYXRpb24iIFZhbHVlRGF0YVR5cGU9IkRvdWJsZSIgU2ltcGxlVmFsdWU9IjU4LjAxNCIgLz4KCQkJPEF1dG9tYXRpb25QYXJhbWV0ZXIgTmFtZT0iUFBBTWF4RHVyYXRpb24iIFZhbHVlRGF0YVR5cGU9IkRvdWJsZSIgU2ltcGxlVmFsdWU9Ijg1Ljk4NiIgLz4KCQkJPEF1dG9tYXRpb25QYXJhbWV0ZXIgTmFtZT0iUFBBVGltZW91dCIgVmFsdWVEYXRhVHlwZT0iRG91YmxlIiBTaW1wbGVWYWx1ZT0iNzIwIiAvPgoJCQk8QXV0b21hdGlvblBhcmFtZXRlciBOYW1lPSJDQ1NPdmVyaGVhZER1cmF0aW9uTWludXRlc1BlclVteUdCYXNlIiBWYWx1ZURhdGFUeXBlPSJEb3VibGUiIFNpbXBsZVZhbHVlPSIwLjIiIC8+CgkJPC9BdXRvbWF0aW9uUGFyYW1ldGVycz4KCTwvQXV0b21hdGlvbj4KCTxDb2xsZWN0aW9uTnVtYmVyPjA8L0NvbGxlY3Rpb25OdW1iZXI+Cgk8Q2VsbEluZGV4PjA8L0NlbGxJbmRleD4KCTxTZXROdW1iZXI+MDwvU2V0TnVtYmVyPgoJPFRlbXBsYXRlUHJlcEtpdCBOYW1lPSJTTVJUYmVsbMKuIFRlbXBsYXRlIFByZXAgS2l0IDEuMCIgRGVzY3JpcHRpb249IlRoZSBTTVJUYmVsbMKuIFRlbXBsYXRlIFByZXAgS2l0IGNvbnRhaW5zIHJlYWdlbnQgc3VwcGxpZXMgdG8gcGVyZm9ybSBTTVJUYmVsbCBsaWJyYXJ5IHByZXBhcmF0aW9ucyBvZiBwcmltZXItYW5uZWFsZWQgU01SVGJlbGwgbGlicmFyaWVzIGZvciBpbnNlcnQgc2l6ZXMgcmFuZ2luZyBmcm9tIDUwMCBicCB0byBvdmVyIDIwIGtiLiIgVGFncz0iVGVtcGxhdGUgUHJlcCBLaXQsIFRQSyIgVmVyc2lvbj0iMS4wIiBQYXJ0TnVtYmVyPSIxMDAtMjU5LTEwMCIgTG90TnVtYmVyPSIzMzMzMzMiIEJhcmNvZGU9IjMzMzMzMzEwMDI1OTEwMDA5MjIxNSIgRXhwaXJhdGlvbkRhdGU9IjIwMTUtMDktMjIiIENoaXBUeXBlPSIxbUFuZDhtQ2hpcHMiIE1pbkluc2VydFNpemU9IjUwMCIgTWF4SW5zZXJ0U2l6ZT0iMjAwMDAiPgoJCTxMZWZ0QWRhcHRvclNlcXVlbmNlIHhtbG5zPSJodHRwOi8vcGFjaWZpY2Jpb3NjaWVuY2VzLmNvbS9QYWNCaW9CYXNlRGF0YU1vZGVsLnhzZCI+QVRDVENUQ1RDQUFDQUFDQUFDQUFDR0dBR0dBR0dBR0dBQUFBR0FHQUdBR0FUPC9MZWZ0QWRhcHRvclNlcXVlbmNlPgoJCTxMZWZ0UHJpbWVyU2VxdWVuY2UgeG1sbnM9Imh0dHA6Ly9wYWNpZmljYmlvc2NpZW5jZXMuY29tL1BhY0Jpb0Jhc2VEYXRhTW9kZWwueHNkIj5hYWNnZ2FnZ2FnZ2FnZ2E8L0xlZnRQcmltZXJTZXF1ZW5jZT4KCQk8UmlnaHRBZGFwdG9yU2VxdWVuY2UgeG1sbnM9Imh0dHA6Ly9wYWNpZmljYmlvc2NpZW5jZXMuY29tL1BhY0Jpb0Jhc2VEYXRhTW9kZWwueHNkIj5BVENUQ1RDVENBQUNBQUNBQUNBQUNHR0FHR0FHR0FHR0FBQUFHQUdBR0FHQVQ8L1JpZ2h0QWRhcHRvclNlcXVlbmNlPgoJCTxSaWdodFByaW1lclNlcXVlbmNlIHhtbG5zPSJodHRwOi8vcGFjaWZpY2Jpb3NjaWVuY2VzLmNvbS9QYWNCaW9CYXNlRGF0YU1vZGVsLnhzZCI+YWFjZ2dhZ2dhZ2dhZ2dhPC9SaWdodFByaW1lclNlcXVlbmNlPgoJPC9UZW1wbGF0ZVByZXBLaXQ+Cgk8QmluZGluZ0tpdCBOYW1lPSJTZXF1ZWzCriBCaW5kaW5nIEtpdCAyLjAiIERlc2NyaXB0aW9uPSJUaGUgU2VxdWVsIEJpbmRpbmcgS2l0IDIuMCBjb250YWlucyByZWFnZW50IHN1cHBsaWVzIHRvIGJpbmQgcHJlcGFyZWQgRE5BIHRlbXBsYXRlIGxpYnJhcmllcyB0byB0aGUgU2VxdWVsIFBvbHltZXJhc2UgMi4wIGluIHByZXBhcmF0aW9uIGZvciBzZXF1ZW5jaW5nIG9uIHRoZSBTZXF1ZWwgU3lzdGVtLiBUaGUgcmVzdWx0IGlzIGEgRE5BIHBvbHltZXJhc2UvdGVtcGxhdGUgY29tcGxleC4gU2VxdWVsIEJpbmRpbmcgS2l0IDEuMCBzaG91bGQgYmUgdXNlZCBvbmx5IHdpdGggU2VxdWVsIFNlcXVlbmNpbmcgS2l0IDIuMC4gUmVhZ2VudCBxdWFudGl0aWVzIHN1cHBvcnQgMjQgYmluZGluZyByZWFjdGlvbnMuIiBUYWdzPSJCaW5kaW5nIEtpdCwgQkRLIiBWZXJzaW9uPSIyLjAiIFBhcnROdW1iZXI9IjEwMC04NjItMjAwIiBMb3ROdW1iZXI9IjQ0NDQ0NCIgQmFyY29kZT0iNDQ0NDQ0MTAwODYyMjAwMDkyMjIwIiBFeHBpcmF0aW9uRGF0ZT0iMjAyMC0wOS0yMiIgSXNPYnNvbGV0ZT0idHJ1ZSIgQ2hpcFR5cGU9IjFtQ2hpcCIgLz4KCTxTZXF1ZW5jaW5nS2l0UGxhdGUgTmFtZT0iU2VxdWVswq4gSUkgU2VxdWVuY2luZyBQbGF0ZSAyLjAgKDQgcnhuKSIgRGVzY3JpcHRpb249IlRoZSBETkEgU2VxdWVuY2luZyBLaXQgY29udGFpbnMgYSBzZXF1ZW5jaW5nIHJlYWdlbnQgcGxhdGUgd2l0aCBjaGVtaXN0cnkgZm9yIHNpbmdsZSBtb2xlY3VsZSByZWFsLXRpbWUgc2VxdWVuY2luZyBvbiB0aGUgUGFjQmlvIFNlcXVlbMKuIERldiB3aXRoIER5bmFtaWMgTG9hZGluZy4gUmVhZ2VudCBxdWFudGl0aWVzIHN1cHBvcnQgNCBzZXF1ZW5jaW5nIHJlYWN0aW9ucyB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggU01SVMKuIENlbGwgNFBhYyhzKS4gICg0IENlbGxzIG1heC9FYWNoIFJvdyBzdXBwbGllcyByZWFnZW50cyBmb3IgMSBTZXF1ZWwgU01SVCBDZWxsKSIgVGFncz0iU2VxdWVuY2luZyBLaXQsIFNRSyIgVmVyc2lvbj0iMi4wIiBQYXJ0TnVtYmVyPSIxMDEtODI2LTEwMCIgTG90TnVtYmVyPSIyMjIyMjIiIEJhcmNvZGU9IjIyMjIyMjEwMTgyNjEwMDA5MjIyMCIgRXhwaXJhdGlvbkRhdGU9IjIwMjAtMDktMjIiIENoaXBUeXBlPSI4bUNoaXAiIE1heENvbGxlY3Rpb25zPSI0IiBOdW1Pc2VUdWJlcz0iMCIgU3VwcG9ydHNEeW5hbWljTG9hZGluZz0idHJ1ZSIgLz4KCTxQcmltYXJ5PgoJCTxBdXRvbWF0aW9uTmFtZT5TZXF1ZWxBbHBoYTwvQXV0b21hdGlvbk5hbWU+CgkJPENvbmZpZ0ZpbGVOYW1lPlNxbFBvQ19TdWJDcmZfMkMyQS10Mi54bWw8L0NvbmZpZ0ZpbGVOYW1lPgoJCTxDQ1NPcHRpb25zPgoJCQk8RXhlY3V0aW9uTW9kZT5Pbkluc3RydW1lbnQ8L0V4ZWN1dGlvbk1vZGU+CgkJPC9DQ1NPcHRpb25zPgoJCTxPdXRwdXRPcHRpb25zPgoJCQk8UmVzdWx0c0ZvbGRlcj5yVW5zZXRfMjAyMjAzMDlfMTczMTM3LzFfQTAxLzwvUmVzdWx0c0ZvbGRlcj4KCQkJPENvbGxlY3Rpb25QYXRoVXJpPi9yb290L3BhdGgvdG8vb3V0cHV0L2ZpbGVzL3JVbnNldF8yMDIyMDMwOV8xNzMxMzcvMV9BMDEvPC9Db2xsZWN0aW9uUGF0aFVyaT4KCQkJPENvcHlGaWxlcz4KCQkJCTxDb2xsZWN0aW9uRmlsZUNvcHk+RmFzdGE8L0NvbGxlY3Rpb25GaWxlQ29weT4KCQkJCTxDb2xsZWN0aW9uRmlsZUNvcHk+QmFtPC9Db2xsZWN0aW9uRmlsZUNvcHk+CgkJCTwvQ29weUZpbGVzPgoJCQk8UmVhZG91dD5CYXNlc19XaXRob3V0X1FWczwvUmVhZG91dD4KCQkJPE1ldHJpY3NWZXJib3NpdHk+TWluaW1hbDwvTWV0cmljc1ZlcmJvc2l0eT4KCQkJPFRyYW5zZmVyUmVzb3VyY2U+CgkJCQk8SWQ+cnN5bmMtMTwvSWQ+CgkJCQk8VHJhbnNmZXJTY2hlbWU+UlNZTkM8L1RyYW5zZmVyU2NoZW1lPgoJCQkJPE5hbWU+TmFtZTE8L05hbWU+CgkJCQk8RGVzY3JpcHRpb24+VHJhbnNmZXIgcmVzb3VyY2UgZm9yIE5hbWUtMTwvRGVzY3JpcHRpb24+CgkJCQk8RGVzdFBhdGg+L3Jvb3QvcGF0aC90by9vdXRwdXQ8L0Rlc3RQYXRoPgoJCQkJPFJlbGF0aXZlUGF0aD5maWxlczwvUmVsYXRpdmVQYXRoPgoJCQk8L1RyYW5zZmVyUmVzb3VyY2U+CgkJPC9PdXRwdXRPcHRpb25zPgoJPC9QcmltYXJ5PgoJPENvbXBvbmVudFZlcnNpb25zPgoJCTxWZXJzaW9uSW5mbyBOYW1lPSJpY3MiIFZlcnNpb249IjExLjEuMC4wIiAvPgoJCTxWZXJzaW9uSW5mbyBOYW1lPSJpdWkiIFZlcnNpb249IlVua25vd24iIC8+CgkJPFZlcnNpb25JbmZvIE5hbWU9ImNoZW1pc3RyeSIgVmVyc2lvbj0iVW5rbm93biIgLz4KCQk8VmVyc2lvbkluZm8gTmFtZT0icGEiIFZlcnNpb249IjExLjEuMCIgLz4KCQk8VmVyc2lvbkluZm8gTmFtZT0icGF3cyIgVmVyc2lvbj0iMTEuMS4wIiAvPgoJCTxWZXJzaW9uSW5mbyBOYW1lPSJwcGEiIFZlcnNpb249IjIuNi4wLjAiIC8+CgkJPFZlcnNpb25JbmZvIE5hbWU9InJlYWx0aW1lIiBWZXJzaW9uPSIxMS4xLjAiIC8+CgkJPFZlcnNpb25JbmZvIE5hbWU9InRyYW5zZmVyIiBWZXJzaW9uPSIxMS4xLjAiIC8+Cgk8L0NvbXBvbmVudFZlcnNpb25zPgo8L0NvbGxlY3Rpb25NZXRhZGF0YT4K","dataset_uuid":"ebc18396-864d-440e-88dd-184ef9542e8f","external_resources":[{"file_name":"out_production.sts.xml","meta_type":"PacBio.SubreadFile.ChipStatsFile"}],"name":"baz2bam_ccs_sideband","subreadset_name":"(Obfuscated)","version":"1.2","zmws":50} (esc)

  $ xpath -q -e '/pbds:SubreadSet/pbds:DataSetMetadata/Collections/text()' out_production.subreadset.xml
